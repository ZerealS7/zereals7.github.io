<!doctype html>
<html lang="en-us">
  <head>
    <title>王道操作系统课程学习笔记 // Zereal-宋致远技术博客</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.72.0" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75，minimum-scale=0.75, maximum-scale=0.75, user-scalable=no" />
    <meta name="author" content="Zereal" />
    <meta name="description" content="" />
    <meta name="referrer" content="never"/>
    <link rel="stylesheet" href="https://zereals7.github.io/css/main.min.f90f5edd436ec7b74ad05479a05705770306911f721193e7845948fb07fe1335.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="王道操作系统课程学习笔记"/>
<meta name="twitter:description" content="操作系统的概念功能和目标 裸机——操作系统
操作系统是计算机系统中最接近硬件的，一层最基本的系统软件。为上层应用软件提供了接口。
操作系统的功能与目标——作为系统资源的管理者
功能
 处理机管理 存储器管理 文件管理 设备管理  作为用户和计算机硬件之间的接口
 命令接口：允许用户直接使用  联机命令接口：说一句，做一句
脱机命令接口：说一堆，做一堆=批处理命令接口 （.bat文件）
 程序接口：通过程序间接使用  在程序中调用user32.dll，该过程即为系统调用，可实现创建窗口等功能，只能通过用户程序间接使用。
程序接口由一组系统调用组成（程序接口=系统调用=广义指令）
  图形用户接口（GUI）
三大接口统称为用户接口
  操作系统是最接近硬件的层次，实现了对硬件机器的扩展。
通常把覆盖了软件的机器称为扩充机器，也就是虚拟机。
形象比喻：
操作系统好比优秀的工匠，硬件就是：锤子、锯子、木头、钉子
操作系统对硬件的扩展：通过优秀工匠，讲简单的原料组成房子、帆船等等。普通用户可以直接使用工匠提供的房子，而无需关心这些东西在底层是怎么组织起来工作的。
操作系统的特征：并发，共享，虚拟，异步 并发和共享为最基本特征，且二者互为存在条件。
并发：当两个或多个时间在同一时间间隔内发生。这些事件宏观上是同时发生的，但微观上是交替发生的。
并行：指两个或多个时间在同一时刻发生。
并发性：指计算机系统同时存在多个运行着的程序。
一个单核处理机同一时刻只能执行一个程序，因此操作系统会负责协调多个程序交替运行（这些程序微观上是交替执行的，但宏观上看起来就像是在同时执行）
事实上，操作系统上伴随着“多道程序技术”出现的，因此，操作系统和程序并发是一起诞生的。
对于4核心CPU，意味着同一时刻可以有4个程序并行执行，但是操作系统的并发性依然必不可少。
共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。
两种资源共享方式
  互斥共享方式
系统中的某些资源，虽然可以提供给多个进程使用，但一个时间段内只允许一个进程访问该资源。
  同时共享方式
  ​ 系统中的某些资源，允许一个时间段内多个进程同时对它们进行访问。
所谓的同时，往往是宏观上的，在微观上，这些进程可能是交替对该资源进行访问。当然微观上也是可以同时的：如打游戏时听音乐，对扬声器的占用。
例子
互斥共享方式：使用QQ和微信同时进行视频，同一时间段内摄像头只能分配给其中一个进程。
同时共享方式：用QQ发送文件A，同时使用微信发送文件B，宏观上看，两边都在同时读取并发送文件。说明两个进程都在访问硬盘资源，从中读取数据。微观上看，两个进程是交替着访问硬盘的。
并发与共享的关系
如果失去并发性，则系统中只有一个程序正在运行，则共享性也失去了意义。它们互为存在条件。
虚拟
虚拟是把一个物理上的实体变为若干逻辑上的对应物。物理实体是实际存在的，而逻辑上对应物，是用户感受到。
虚拟技术主要可分为
空分复用技术，如虚拟存储器技术
时分复用技术，如虚拟处理器
如果系统失去了并发性，则一段时间内系统中只许运行一道程序，那么就失去了实现虚拟下的意义了。因此，没有并发性就谈不上虚拟性。
异步
异步是指，在多道程序环境中，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。
显然，如果失去了并发性，则系统只能串行地处理各个进程，每个进程的执行会一贯到底。只有系统拥有并发性，才有可能导致异步性。操作系统的发展与分类 手工操作阶段"/>

    <meta property="og:title" content="王道操作系统课程学习笔记" />
<meta property="og:description" content="操作系统的概念功能和目标 裸机——操作系统
操作系统是计算机系统中最接近硬件的，一层最基本的系统软件。为上层应用软件提供了接口。
操作系统的功能与目标——作为系统资源的管理者
功能
 处理机管理 存储器管理 文件管理 设备管理  作为用户和计算机硬件之间的接口
 命令接口：允许用户直接使用  联机命令接口：说一句，做一句
脱机命令接口：说一堆，做一堆=批处理命令接口 （.bat文件）
 程序接口：通过程序间接使用  在程序中调用user32.dll，该过程即为系统调用，可实现创建窗口等功能，只能通过用户程序间接使用。
程序接口由一组系统调用组成（程序接口=系统调用=广义指令）
  图形用户接口（GUI）
三大接口统称为用户接口
  操作系统是最接近硬件的层次，实现了对硬件机器的扩展。
通常把覆盖了软件的机器称为扩充机器，也就是虚拟机。
形象比喻：
操作系统好比优秀的工匠，硬件就是：锤子、锯子、木头、钉子
操作系统对硬件的扩展：通过优秀工匠，讲简单的原料组成房子、帆船等等。普通用户可以直接使用工匠提供的房子，而无需关心这些东西在底层是怎么组织起来工作的。
操作系统的特征：并发，共享，虚拟，异步 并发和共享为最基本特征，且二者互为存在条件。
并发：当两个或多个时间在同一时间间隔内发生。这些事件宏观上是同时发生的，但微观上是交替发生的。
并行：指两个或多个时间在同一时刻发生。
并发性：指计算机系统同时存在多个运行着的程序。
一个单核处理机同一时刻只能执行一个程序，因此操作系统会负责协调多个程序交替运行（这些程序微观上是交替执行的，但宏观上看起来就像是在同时执行）
事实上，操作系统上伴随着“多道程序技术”出现的，因此，操作系统和程序并发是一起诞生的。
对于4核心CPU，意味着同一时刻可以有4个程序并行执行，但是操作系统的并发性依然必不可少。
共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。
两种资源共享方式
  互斥共享方式
系统中的某些资源，虽然可以提供给多个进程使用，但一个时间段内只允许一个进程访问该资源。
  同时共享方式
  ​ 系统中的某些资源，允许一个时间段内多个进程同时对它们进行访问。
所谓的同时，往往是宏观上的，在微观上，这些进程可能是交替对该资源进行访问。当然微观上也是可以同时的：如打游戏时听音乐，对扬声器的占用。
例子
互斥共享方式：使用QQ和微信同时进行视频，同一时间段内摄像头只能分配给其中一个进程。
同时共享方式：用QQ发送文件A，同时使用微信发送文件B，宏观上看，两边都在同时读取并发送文件。说明两个进程都在访问硬盘资源，从中读取数据。微观上看，两个进程是交替着访问硬盘的。
并发与共享的关系
如果失去并发性，则系统中只有一个程序正在运行，则共享性也失去了意义。它们互为存在条件。
虚拟
虚拟是把一个物理上的实体变为若干逻辑上的对应物。物理实体是实际存在的，而逻辑上对应物，是用户感受到。
虚拟技术主要可分为
空分复用技术，如虚拟存储器技术
时分复用技术，如虚拟处理器
如果系统失去了并发性，则一段时间内系统中只许运行一道程序，那么就失去了实现虚拟下的意义了。因此，没有并发性就谈不上虚拟性。
异步
异步是指，在多道程序环境中，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。
显然，如果失去了并发性，则系统只能串行地处理各个进程，每个进程的执行会一贯到底。只有系统拥有并发性，才有可能导致异步性。操作系统的发展与分类 手工操作阶段" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zereals7.github.io/post/%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" />
<meta property="article:published_time" content="2021-07-17T19:49:26+08:00" />
<meta property="article:modified_time" content="2021-07-17T19:49:26+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://zereals7.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="Zereal" /></a>
      <h1>Zereal</h1>
      <p>Java coder</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/ZerealS7" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">王道操作系统课程学习笔记</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 17, 2021
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          1 min read
        </div></div>
    </header>
    <div class="post-content">
      <h3 id="操作系统的概念功能和目标"><strong>操作系统的概念功能和目标</strong></h3>
<p>裸机——操作系统</p>
<p>操作系统是计算机系统中最接近硬件的，一层最基本的系统软件。为上层应用软件提供了接口。</p>
<p>操作系统的功能与目标——作为系统资源的管理者</p>
<p>功能</p>
<ul>
<li>处理机管理</li>
<li>存储器管理</li>
<li>文件管理</li>
<li>设备管理</li>
</ul>
<p>作为用户和计算机硬件之间的接口</p>
<ul>
<li>命令接口：允许用户直接使用</li>
</ul>
<p>联机命令接口：说一句，做一句</p>
<p>脱机命令接口：说一堆，做一堆=批处理命令接口 （.bat文件）</p>
<ul>
<li>程序接口：通过程序间接使用</li>
</ul>
<p>在程序中调用user32.dll，该过程即为系统调用，可实现创建窗口等功能，只能通过用户程序间接使用。</p>
<p>程序接口由一组系统调用组成（程序接口=系统调用=广义指令）</p>
<ul>
<li>
<p>图形用户接口（GUI）</p>
<p>三大接口统称为用户接口</p>
</li>
</ul>
<p>操作系统是最接近硬件的层次，实现了对硬件机器的扩展。</p>
<p>通常把覆盖了软件的机器称为扩充机器，也就是虚拟机。</p>
<p>形象比喻：</p>
<p>操作系统好比优秀的工匠，硬件就是：锤子、锯子、木头、钉子</p>
<p>操作系统对硬件的扩展：通过优秀工匠，讲简单的原料组成房子、帆船等等。普通用户可以直接使用工匠提供的房子，而无需关心这些东西在底层是怎么组织起来工作的。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/12200061626580001..jpg" alt="12200061626580001."></p>
<h3 id="操作系统的特征并发共享虚拟异步"><strong>操作系统的特征：并发，共享，虚拟，异步</strong></h3>
<p>并发和共享为最基本特征，且二者互为存在条件。</p>
<p>并发：当两个或多个时间在同一时间间隔内发生。这些事件宏观上是同时发生的，但微观上是交替发生的。</p>
<p>并行：指两个或多个时间在同一时刻发生。</p>
<p>并发性：指计算机系统同时存在多个运行着的程序。</p>
<p>一个单核处理机同一时刻只能执行一个程序，因此操作系统会负责协调多个程序交替运行（这些程序微观上是交替执行的，但宏观上看起来就像是在同时执行）</p>
<p>事实上，操作系统上伴随着“多道程序技术”出现的，因此，操作系统和程序并发是一起诞生的。</p>
<p>对于4核心CPU，意味着同一时刻可以有4个程序并行执行，但是操作系统的并发性依然必不可少。</p>
<p><strong>共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。</strong></p>
<p>两种资源共享方式</p>
<ul>
<li>
<p>互斥共享方式</p>
<p>系统中的某些资源，虽然可以提供给多个进程使用，但<strong>一个时间段内只允许一个进程访问该资源。</strong></p>
</li>
<li>
<p>同时共享方式</p>
</li>
</ul>
<p>​       系统中的某些资源，<strong>允许一个时间段内多个进程同时对它们进行访问。</strong></p>
<p>所谓的同时，往往是宏观上的，在微观上，这些进程可能是交替对该资源进行访问。当然微观上也是可以同时的：如打游戏时听音乐，对扬声器的占用。</p>
<p><strong>例子</strong></p>
<p>互斥共享方式：使用QQ和微信同时进行视频，同一时间段内摄像头只能分配给其中一个进程。</p>
<p>同时共享方式：用QQ发送文件A，同时使用微信发送文件B，宏观上看，两边都在同时读取并发送文件。说明两个进程都在访问硬盘资源，从中读取数据。微观上看，两个进程是交替着访问硬盘的。</p>
<p><strong>并发与共享的关系</strong></p>
<p>如果失去并发性，则系统中只有一个程序正在运行，则共享性也失去了意义。它们互为存在条件。</p>
<p><strong>虚拟</strong></p>
<p>虚拟是把一个物理上的实体变为若干逻辑上的对应物。物理实体是实际存在的，而逻辑上对应物，是用户感受到。</p>
<p>虚拟技术主要可分为</p>
<p>空分复用技术，如虚拟存储器技术</p>
<p>时分复用技术，如虚拟处理器</p>
<p>如果系统失去了并发性，则一段时间内系统中只许运行一道程序，那么就失去了实现虚拟下的意义了。因此，没有并发性就谈不上虚拟性。</p>
<p><strong>异步</strong></p>
<p>异步是指，在多道程序环境中，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。</p>
<p>显然，如果失去了并发性，则系统只能串行地处理各个进程，每个进程的执行会一贯到底。只有系统拥有并发性，才有可能导致异步性。<img src="https://gitee.com/zerealsong/blogimage/raw/master/img/10397921626584198..jpg" alt="10397921626584198."></p>
<h3 id="操作系统的发展与分类"><strong>操作系统的发展与分类</strong></h3>
<p>手工操作阶段</p>
<p>主要缺点：用户独占全机，人机速度矛盾导致资源利用率极低</p>
<p>单道批处理系统</p>
<p>引入脱机输入输出技术（用磁带完成），并监督程序负责控制作业的输入输出。</p>
<p>主要优点:缓解了一定程度的人机速度矛盾，资源利用率有所提升。</p>
<p>主要缺点：内存着仅能有一道程序运行，只有该程序运行结束之后才能调入下一道程序。CPU有大量的时间在空闲等待IO完成，资源利用率依然很低。</p>
<p>多道批处理系统——操作系统诞生</p>
<p>从磁带中每次向处理器输入多道程序。操作系统正式诞生，并引入了中断技术，由操作系统负责管理这些程序的运行，各个程序并发执行。</p>
<p>主要优点：多道程序并发执行，共享计算机资源，资源利用率大幅度提升，CPU和其他资源保持忙碌状态，系统吞吐量增大。</p>
<p>主要缺点：用户响应时间长，没有人机交互功能（用户提交自己的作业之后就只能等待计算机处理完成，中间不能控制自己的作业执行）</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6188781626585668..jpg" alt="6188781626585668."></p>
<p>相当于三种设备串行工作，导致资源利用率低。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7305381626585854..jpg" alt="7305381626585854."></p>
<p>输入输出计算设备并行工作，大大提高了资源利用率。</p>
<p><strong>分时操作系统</strong></p>
<p>计算机以时间片为单位轮流为各个用户/作业服务，各个用户可通过终端与计算机进行交互。</p>
<p>主要优点：用户请求可以被即时响应，解决了人机交互问题。允许多个用户同时使用同一台计算机，并且用户对计算机的操作相互独立，感受不到别人的存在。</p>
<p>主要缺点：不能优先处理一些紧急任务，操作系统对各个用户/作业都是完全公平的，循环地为每个用户作业服务一个时间片，不区分任务的紧急性。</p>
<p><strong>实时操作系统</strong></p>
<p>主要优点：能够优先响应一些紧急任务，某些紧急任务不需时间片排队。</p>
<p>在实时操作系统的控制下，计算机系统接收到外部信号后及时进行处理，并且要在严格的时限内处理完事件。实时操作系统的主要特点是及时性和可靠性。</p>
<p>硬实时系统：必须在绝对严格的规定时间内完成处理，如导弹控制系统，自动驾驶系统</p>
<p>软实时系统：能够接收偶尔违反时间规定，如12306火车订票系统</p>
<p><strong>其他几种操作系统</strong></p>
<p>网络操作系统：伴随着计算机网络的发展而诞生，能把网络中各个计算机有机地结合起来，实现数据传送等功能，实现网络中各种资源的共享（如文件共享）和各台计算机之间的通信。（如Windows NT 就是一种典型的网络操作系统，网站服务器就可以使用 ）</p>
<p>分布式操作系统：主要特点是分布式和并行性。系统中单各台计算机地位相同、任何工作都可以分布在这些计算机上，由它们并行，协同完成这个任务。</p>
<p>个人计算机操作系统：如Windows XP，MacOS,方便个人使用。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/10080621626587149..jpg" alt="10080621626587149."></p>
<h3 id="操作系统的运行机制和体系结构"><strong>操作系统的运行机制和体系结构</strong></h3>
<p>指令就是处理器CPU能识别、执行的最基本命令</p>
<p><strong>指令</strong></p>
<p>特权指令：如内存清零指令</p>
<p>非特权指令：如普通运算指令</p>
<p><strong>处理器的两种状态</strong></p>
<p>用户态（目态）:此时CPU只能执行非特权指令</p>
<p>核心态（管态）：特权指令、非特权指令都可执行</p>
<p>用程序状态字寄存器（PSW）中的某标志位来标识当前处理器处于什么状态：如0为用户态，1为核心态。</p>
<p><strong>两种程序</strong></p>
<p>内核程序：操作系统的内核程序是系统的管理者，既可以执行特权指令，也可以执行非特权指令，运行在核心态。</p>
<p>应用程序：为了保证系统能安全运行，普通应用程序只能执行非特权指令，运行在用户态。</p>
<p><strong>操作系统的内核</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/5601371626588942..jpg" alt="5601371626588942."></p>
<p>内核是计算机上配置的底层软件，是操作系统最基本、最核心的部分。</p>
<p>实现操作系统内核功能的那些程序就是内核程序。</p>
<p><strong>操作系统体系结构：大内核和微内核</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6938411626589147..jpg" alt="6938411626589147."></p>
<p><strong>大内核</strong></p>
<p>将操作系统的主要功能模块都作为系统内核，运行在核心态。</p>
<p>优点：高性能</p>
<p>缺点：内核代码庞大，结构混乱，难以维护。</p>
<p><strong>微内核</strong></p>
<p>只把最基本的功能保留在内核</p>
<p>优点：内核功能少，结构清晰，方便维护</p>
<p>缺点：需要频繁地在核心态和用户台之间切换，性能低。</p>
<p>类比：</p>
<p>操作系统的体系结构问题与企业的管理问题很相似</p>
<p>内核就是企业的管理层，负责一些重要的工作。只有管理处才能执行特权指令，普通员工只能执行非特权指令。用户态、核心态之间的切换相当于普通员工和管理层之间的工作交接。</p>
<p>大内核：企业初创时体量不大，管理层的人会负责大部分的事情。优点是效率高；缺点是组织结构混乱，难以维护。</p>
<p>微内核：随着企业体量越来越大，管理层只负责最核心的一些工作。优点是组织结构清晰，方便维护；缺点是效率低。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/9962221626600818..jpg" alt="9962221626600818."></p>
<p>最常考知识点：</p>
<p>1.特权指令只能在核心态下执行</p>
<p>2.内核程序只能在核心态下执行</p>
<p>3.核心态、用户态之间的切换</p>
<h3 id="中断和异常">中断和异常</h3>
<p>本质:发生中断意味着需要操作系统介入，开展管理工作</p>
<p>CPU收到计时部件发出的中断信号，切换为核心态对中断进行处理。</p>
<p>操作系统内核负责对中断信号进行处理。</p>
<p>1.当中断发生后，CPU立即进入核心态</p>
<p>2.当中断发生后  ，当前运行的进程暂停运行，并由<strong>操作系统内核对中断进行处理。</strong></p>
<p>3.<strong>对于不同的中断信号，会进行不同的处理。</strong></p>
<p>发生了中断，就意味着需要操作系统的介入，开展管理工作。由于操作系统的管理工作（比如进程切换、分配I/O设备等 ）需要使用特权指令，因此CPU要从用户态转为核心态。中断可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权。有了中断，才能实现多道程序并发执行。</p>
<p><strong>用户态到核心态是通过中断实现的。并且中断是唯一途径。而核心态到用户态的切换是通过执行一个特权指令，将程序状态字（PSW）的标志位设置为“用户态”。</strong></p>
<p>内中断，分为异常例外陷入。**中断信号的来源是CPU内部，与当前执行的指令有关。**包括自愿中断——指令中断（如系统调用时的访管指令，又称为陷入指令，trap指令）。强迫中断，分为硬件故障（缺页），软件中断（如整数除0）。<strong>外中断，信号的来源是CPU外部，与当前执行的指令无关。</strong></p>
<p>终止是不可恢复的致命错误造成的结果，终止处理程序不再将控制返回给引发终止的应用程序，如整数除0。</p>
<p>外中断是狭义的中断，分为外设请求（如：IO操作完成发出的中断信号）和人工干预（如：用户强行终止一个进程 ）</p>
<p>内中断分为陷入(系统调用时使用访管指令引起)，故障（由错误条件引起，如硬件故障缺页），终止(整数除以0，软件中断)。外中断分为IO中断请求，人工干预。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7077531626614993..jpg" alt="7077531626614993."></p>
<p><strong>外中断的处理过程</strong></p>
<p>step1:执行完每个指令之后，CPU都要检查当前是否有外部中断信号。</p>
<p>step2:如果检测到外部中断信号，则需要保护被中断进程的CPU环境（如程序状态字PSW、程序计数器PC，各种通用寄存器）</p>
<p>step3:根据中断信号类型转入相应的中断处理程序(属于内核，运行在核心态)</p>
<p>Step4:恢复原进程CPU环境并退出中断，返回原进程继续往下执行</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/10114091626658912..jpg" alt="10114091626658912."></p>
<h3 id="系统调用"><strong>系统调用</strong></h3>
<p>操作系统作为用户和计算机硬件之间的接口，需要向上提供一些简单易用的服务。主要包括命令接口（联机和脱机）和程序接口。其中，程序接口由一组系统调用组成。</p>
<p>应用程序通过系统调用请求操作系统的服务。系统中单各种共享资源由操作系统统一掌管，因此在用户程序中。凡是与资源有关的操作（如存储分配，IO操作，文件管理等），都必须通过系统调用的方式向操作系统提出服务请求。由操作系统代为完成。这样可以保证系统的稳定性和安全性，防止用户进行非法操作。<img src="https://gitee.com/zerealsong/blogimage/raw/master/img/2990031626659667..jpg" alt="2990031626659667."></p>
<p><strong>系统调用与库函数的区别</strong></p>
<p>库函数的底层会封装相应的系统调用。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/5218841626659899..jpg" alt="5218841626659899."></p>
<p><strong>系统调用背后的过程</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7580811626660707..jpg" alt="7580811626660707."></p>
<p>这里的Int是指的interrerupt是指的陷入或访管指令的意思，会引发内中断进入核心态，Int指令的参数x指明了系统的调用号。</p>
<p>整个过程：</p>
<p>传递系统调用参数——》执行陷入指令（用户态）——》执行系统调用相应服务程序（核心态）——》返回用户程序</p>
<p><strong>注意：1.陷入指令是在用户态执行的，执行陷入指令之后立即引发一个内中断，从而CPU进入核心态</strong></p>
<p>​			<strong>2.发生系统调用请求是在用户台，而对系统调用的相应处理在核心态下进行。</strong></p>
<p>​			<strong>3.陷入指令是唯一一个只能在用户态执行，而不可在核心态执行的指令。</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/10718471626665268..jpg" alt="10718471626665268."></p>
<h3 id="进程的定义组成组织方式特征">进程的定义、组成、组织方式、特征</h3>
<p>程序就是一个指令序列</p>
<p>程序的代码放在程序段内，程序运行过程处理的数据放在数据段内（如变量）。</p>
<p>系统为每个运行的程序配置一个数据结构，称为进程控制块（PCB），用来描述进程的各种信息。（如程序代码存放位置）</p>
<p><strong>程序段、数据段、PCB三部分组成了进程实体（进程映像</strong>）。一般情况下，我们把进程实体简称为进程，例如，所谓创建进程，实质上是创建进程实体中的PCB；而撤销进程，实质上是撤销进程实体中的PCB。</p>
<p>注意：PCB是进程存在的唯一标志</p>
<p>进程的其他典型定义</p>
<p>1.进程是程序的一次执行过程</p>
<p>2.进程是一个程序及其数据在处理机上顺序执行时所发生的活动。</p>
<p>3.进程是具有独立功能的程序在数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位</p>
<p>引入进程实体的概念后，可以把进程定义为：</p>
<p><strong>进程是进程实体的运行过程</strong>，是系统进行资源分配和调度的一个独立单位。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6478771626669735..jpg" alt="6478771626669735."></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7082651626669815..jpg" alt="7082651626669815."></p>
<p><strong>进程的组织</strong></p>
<p>对于成百上千个PCB要找到合适的方式组织</p>
<p>链接方式：按照进程状态将PCB分为多个队列，操作系统持有指向各个队列的指针</p>
<p>索引方式：根据进程状态的不同，建立几张索引表，操作系统持有指向各个索引表的指针</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/8451181626672855..jpg" alt="8451181626672855."></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/8754941626672959..jpg" alt="8754941626672959."></p>
<h4 id="进程的特征"><strong>进程的特征</strong></h4>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/10100671626673348..jpg" alt="10100671626673348."></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/11150251626700139..jpg" alt="11150251626700139."></p>
<p><strong>进程的状态与转换</strong></p>
<p>为了方便对各个进程的管理，操作系统需要将进程合理地划分为记住状态。、</p>
<p>打包盒处理机环境下，每一时刻最多只有一个进程处于运行态。双核环境下可以同时有两个进程处于运行态</p>
<p><strong>三种基本状态</strong></p>
<p>运行态：占有CPU，并在CPU上运行</p>
<p>就绪态：已经具备运行条件，但由于没有空闲CPU，而暂时不能运行。（万事具备，只欠CPU）</p>
<p>阻塞态：因等待某一事件而暂时不能运行。如：等待操作系统分配打印机，等待读磁盘操作的结果。CPU是计算机中最昂贵的部件，为了提高CPU的利用率，需要先将其他进程需要的资源分配到位，才能得到CPU的服务。</p>
<p><strong>进程另外两种状态</strong></p>
<p>创建态：操作他需要完成创建进程，操作系统为该进程分配所需的内存空间等系统资源，并为其创建初始化PCB。（如：为进程分配PID）</p>
<p>终止态：进程运行结束（或者由于BUG导致进程无法继续执行下去，比如数组越界错误），需要撤销进程。操作系统需要完成撤销进程相关的工作，完成将分配给进程的资源回收，撤销进程PCB等工作。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/4761521626703058..jpg" alt="4761521626703058."></p>
<p>运行态到阻塞态是一种进程自身做出的主动行为</p>
<p>阻塞态到就绪态不是进程自身能控制的，是一种被动行为。</p>
<p>注意：不能由阻塞态直接转换为运行态，也不能由就绪态直接转换为阻塞态（因为进入阻塞态是进程主动请求的，必然需要进程在运行时才能发出这种请求）</p>
<p>进程运行结束，或运行过程中遇到不可修复的错误则进入终止态。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6481971626703569..jpg" alt="6481971626703569."></p>
<h3 id="进程控制"><strong>进程控制</strong></h3>
<p>进程控制的主要功能是对系统中的所有进程实施有效的管理。它具有创建新进程、撤销已有进程、实现进程状态转换等功能。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/2994421626854608..jpg" alt="2994421626854608."></p>
<p>用原语实现进程控制。原语的特点是执行期间不允许中断，只能一气呵成。</p>
<p>这种不可中断的操作，称为原子操作。</p>
<p>原语采用“关中断指令”和“开中断指令”实现。</p>
<p>显然。关/开中断指令的权限非常大，必然是只允许运行在核心态下执行的特权指令。</p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/5774251626855304..jpg" alt="5774251626855304."></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7332671626855543..jpg" alt="7332671626855543."><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6482961626855382..jpg" alt="6482961626855382."></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7785791626855618..jpg" alt="7785791626855618."></p>
<h3 id="进程通信"><strong>进程通信</strong></h3>
<p>进程通信指的是进程之间的信息交换。</p>
<p>进程是分配系统资源的单位，因此各进程拥有的内存地址空间相互独立</p>
<p>为了保证安全，一个进程不能直接访问另一个进程的地址空间。</p>
<p>但是进程之间的信息交换又是必须实现的。为了保证进程间的安全通信，操作系统提供了3种方法。</p>
<p>分别是共享存储，信息传递，管道通信。</p>
<p><strong>共享存储</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/2883151626856348..jpg" alt="2883151626856348."></p>
<p><strong>管道通信</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/4972751626856680..jpg" alt=""></p>
<p><strong>消息传递</strong></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/6481691626856913..jpg" alt=""></p>
<p><img src="https://gitee.com/zerealsong/blogimage/raw/master/img/7190381626857223..jpg" alt=""></p>

    </div>
    <div class="post-footer">
      
    </div>
    <div class="post-comment">
      
      


<span id="/post/%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="leancloud_visitors" data-flag-title="王道操作系统课程学习笔记">
    <span class="post-meta-item-text">文章阅读量 </span>
    <span class="leancloud-visitors-count">1000000</span>
    <p></p>
  </span>
<div id="vcomments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script type="text/javascript">
  new Valine({
    el: '#vcomments' ,
    appId: 'cScQmclMsD4OOWCclCP1pNsz-gzGzoHsz',
    appKey: 'dtSaHLmdH3J4ICVVInYg9YFM',
    notify:  false ,
  verify:  false ,
  avatar:'mm',
    placeholder: '说点什么吧...',
    visitor:  true 
  });
</script>

    </div>
  </article>

    </main>
  </body>
</html>
